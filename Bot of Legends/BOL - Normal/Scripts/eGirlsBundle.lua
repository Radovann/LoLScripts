--[[

                                                                                                                                                                                                       
                                                                                                                                                                   dddddddd                            
                            GGGGGGGGGGGGG  iiii                    lllllll                       BBBBBBBBBBBBBBBBB                                                 d::::::dlllllll                     
                         GGG::::::::::::G i::::i                   l:::::l                       B::::::::::::::::B                                                d::::::dl:::::l                     
                       GG:::::::::::::::G  iiii                    l:::::l                       B::::::BBBBBB:::::B                                               d::::::dl:::::l                     
                      G:::::GGGGGGGG::::G                          l:::::l                       BB:::::B     B:::::B                                              d:::::d l:::::l                     
    eeeeeeeeeeee     G:::::G       GGGGGGiiiiiiirrrrr   rrrrrrrrr   l::::l     ssssssssss          B::::B     B:::::Buuuuuu    uuuuuunnnn  nnnnnnnn        ddddddddd:::::d  l::::l     eeeeeeeeeeee    
  ee::::::::::::ee  G:::::G              i:::::ir::::rrr:::::::::r  l::::l   ss::::::::::s         B::::B     B:::::Bu::::u    u::::un:::nn::::::::nn    dd::::::::::::::d  l::::l   ee::::::::::::ee  
 e::::::eeeee:::::eeG:::::G               i::::ir:::::::::::::::::r l::::l ss:::::::::::::s        B::::BBBBBB:::::B u::::u    u::::un::::::::::::::nn  d::::::::::::::::d  l::::l  e::::::eeeee:::::ee
e::::::e     e:::::eG:::::G    GGGGGGGGGG i::::irr::::::rrrrr::::::rl::::l s::::::ssss:::::s       B:::::::::::::BB  u::::u    u::::unn:::::::::::::::nd:::::::ddddd:::::d  l::::l e::::::e     e:::::e
e:::::::eeeee::::::eG:::::G    G::::::::G i::::i r:::::r     r:::::rl::::l  s:::::s  ssssss        B::::BBBBBB:::::B u::::u    u::::u  n:::::nnnn:::::nd::::::d    d:::::d  l::::l e:::::::eeeee::::::e
e:::::::::::::::::e G:::::G    GGGGG::::G i::::i r:::::r     rrrrrrrl::::l    s::::::s             B::::B     B:::::Bu::::u    u::::u  n::::n    n::::nd:::::d     d:::::d  l::::l e:::::::::::::::::e 
e::::::eeeeeeeeeee  G:::::G        G::::G i::::i r:::::r            l::::l       s::::::s          B::::B     B:::::Bu::::u    u::::u  n::::n    n::::nd:::::d     d:::::d  l::::l e::::::eeeeeeeeeee  
e:::::::e            G:::::G       G::::G i::::i r:::::r            l::::l ssssss   s:::::s        B::::B     B:::::Bu:::::uuuu:::::u  n::::n    n::::nd:::::d     d:::::d  l::::l e:::::::e           
e::::::::e            G:::::GGGGGGGG::::Gi::::::ir:::::r           l::::::ls:::::ssss::::::s     BB:::::BBBBBB::::::Bu:::::::::::::::uun::::n    n::::nd::::::ddddd::::::ddl::::::le::::::::e          
 e::::::::eeeeeeee     GG:::::::::::::::Gi::::::ir:::::r           l::::::ls::::::::::::::s      B:::::::::::::::::B  u:::::::::::::::un::::n    n::::n d:::::::::::::::::dl::::::l e::::::::eeeeeeee  
  ee:::::::::::::e       GGG::::::GGG:::Gi::::::ir:::::r           l::::::l s:::::::::::ss       B::::::::::::::::B    uu::::::::uu:::un::::n    n::::n  d:::::::::ddd::::dl::::::l  ee:::::::::::::e  
    eeeeeeeeeeeeee          GGGGGG   GGGGiiiiiiiirrrrrrr           llllllll  sssssssssss         BBBBBBBBBBBBBBBBB       uuuuuuuu  uuuunnnnnn    nnnnnn   ddddddddd   dddddllllllll    eeeeeeeeeeeeee  
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                  
												 _          ____      _____ _               _     
												| |_ _ _   |    \ ___|  _  | |_ ___ ___ ___|_|_ _ 
												| . | | |  |  |  |  _|   __|   | . | -_|   | |_'_|
												|___|_  |  |____/|_| |__|  |_|_|___|___|_|_|_|_,_|
													|___|                                         

													
												
]]--







assert(load(Base64Decode("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"), nil, "bt", _ENV))()
TrackerLoad("vAMRzo13aVfCGKB7")

local version = "1.01"

local Champions = {
	-- ["Annie"] = true,
	-- ["Karma"] = true,
	-- ["Janna"] = true,
	-- ["Leona"] = true,
	-- ["Lulu"] = true,
	-- ["Lux"] = true,
	-- ["Morgana"] = true,
	["Nami"] = true,
	["Sona"] = true,
	["Soraka"] = true,
	-- ["Zyra"] = true
}

function PrintMsg(msg)
	PrintChat("<font color=\"#c300ff\"><b>[</b></font><font color=\"#ff3fe5\"><b>eGirls Bundle</b></font><font color=\"#c300ff\"><b>]</b></font> <font color=\"#00b6ff\">"..msg.."</font>")
end

if not _G.UPLloaded then
	if FileExist(LIB_PATH .. "/UPL.lua") then
		require("UPL")
		_G.UPL = UPL()
  else 
		PrintMsg("Downloading UPL, please don't press F9")
		DelayAction(function()
			DownloadFile("https://raw.github.com/nebelwolfi/BoL/master/Common/UPL.lua".."?rand="..math.random(1,10000), LIB_PATH.."UPL.lua", function()
				PrintMsg("Successfully downloaded UPL. Press F9 twice.")
			end)
		end, 3) 
		return
	end
end

-- Made by Nebelwolfi. Makes Classes Local, Not Global --
function Class(name)
	_ENV[name] = { }
	_ENV[name].__index = _ENV[name]
	local mt = { __call = function(self, ...) local b = { } setmetatable(b, _ENV[name]) b:__init(...) return b end }
	setmetatable(_ENV[name], mt)
end

function OnLoad()
	ts = TargetSelector(TARGET_LOW_HP_PRIORITY, 1500, DAMAGE_MAGIC, true)
	ts.name = "Target Selector"
	
	Core = Core(ts)
end

function TargetCheck(unit)
	if unit and unit ~= nil and unit.valid and not unit.dead and unit.bTargetable and unit.visible and ValidTarget(unit) then
		return true
	end
end





--[[
		 _____   _____   _____    _____  
		/  ___| /  _  \ |  _  \  | ____| 
		| |     | | | | | |_| |  | |__   
		| |     | | | | |  _  /  |  __|  
		| |___  | |_| | | | \ \  | |___  
		\_____| \_____/ |_|  \_\ |_____| 

]]--


Class("Core")
function Core:__init(ts)
	if not Champions[myHero.charName] then return end
	self:update()
	
	self:Menu(ts)
	
	AddTickCallback(function ()
		self:tick()
	end)
	
	AddDrawCallback(function ()
		if not myHero.dead then
			self:draw()
		end
	end)
	
	self:loadchamp()
end

function Core:update()
    if version ~= TCPGetRequest("s1mplescripts.de", "/DrPhoenix/BoL/Scripts/eGirlsBundle/eGirlsBundle.version", {}, 80) then
        PrintMsg("Updating don't press F9 !")
        GetWebFile("s1mplescripts.de","/DrPhoenix/BoL/Scripts/eGirlsBundle/eGirlsBundle.lua", {}, SCRIPT_PATH..GetCurrentEnv().FILE_NAME, 80, false)
        PrintMsg("Updated ! Press 2xF9 to reload !")
    end
end

function Core:loadchamp()
	if (Champions[myHero.charName] and _ENV["_" .. myHero.charName]) then
		self.Champion = _ENV["_" .. myHero.charName](self.Menu)
		PrintMsg("Loading "..myHero.charName)
		return true
	else
		PrintMsg(myHero.charName.. " - Is not Supported")
		return false
	end
end

function Core:Menu()
	self.Menu = scriptConfig("eGirls Bundle", "Menu")

	self.Menu:addSubMenu("Key Settings", "KeySettings")
		self.Menu.KeySettings:addParam("ComboON", "Combo", SCRIPT_PARAM_ONKEYDOWN, false, string.byte(" "))
	
	self.Menu:addSubMenu("Combo", "Combo")
	
	self.Menu:addSubMenu("Miscellaneous", "MiscSettings")
		self.Menu.MiscSettings:addParam("SetSkin", "Select Skin", SCRIPT_PARAM_SLICE, 0, 0, 20, 0)
			self.Menu.MiscSettings:setCallback("SetSkin", function (value) SetSkin(myHero, self.Menu.MiscSettings.SetSkin - 1) end)
	
	self.Menu:addSubMenu("Draw", "DrawSettings")
		self.Menu.DrawSettings:addParam("DrawAA", "Draw AA range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawAAColor", "AA color", SCRIPT_PARAM_COLOR, {255, 170, 0, 255})
		self.Menu.DrawSettings:addParam("DrawTarget", "Draw current target", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawTargetColor", "Target color", SCRIPT_PARAM_COLOR, {255, 255, 0, 255})
	
	self.Menu:addTS(ts)
	
	self.Menu:addParam("space2", "", 5, "")
	self.Menu:addParam("signature0", "                 eGirls Bundle v"..version, 5, "")
	self.Menu:addParam("signature1", "                Let the Doctor carry", 5, "")
	self.Menu:addParam("signature2", "                    by DrPhoenix    ", 5, "")
end

function Core:tick()
	ts:update()
	target = ts.target
end

function Core:draw()
	if self.Menu.DrawSettings.DrawAA then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, myHero.range + myHero.boundingRadius, 1, ARGB(self.Menu.DrawSettings.DrawAAColor[1], self.Menu.DrawSettings.DrawAAColor[2], self.Menu.DrawSettings.DrawAAColor[3], self.Menu.DrawSettings.DrawAAColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawTarget then
		if target ~= nil then
			DrawCircle3D(target.x, target.y, target.z, 25, 3, ARGB(self.Menu.DrawSettings.DrawTargetColor[1], self.Menu.DrawSettings.DrawTargetColor[2], self.Menu.DrawSettings.DrawTargetColor[3], self.Menu.DrawSettings.DrawTargetColor[4]), 8)
		end
	end
end





--[[
		 __   _       ___       ___  ___   _  
		|  \ | |     /   |     /   |/   | | | 
		|   \| |    / /| |    / /|   /| | | | 
		| |\   |   / / | |   / / |__/ | | | | 
		| | \  |  / /  | |  / /       | | | | 
		|_|  \_| /_/   |_| /_/        |_| |_| 

]]--


Class("_Nami")
function _Nami:__init(Menu)
	self.Menu = Menu
	self:AddMenu()
	self:SetupUPL()
	
	IsRecalling = false
	
	AddTickCallback(function ()
		self:tick()
	end)
	
	AddDrawCallback(function ()
		if not myHero.dead then
			self:draw()
		end
	end)
	
	AddAnimationCallback(function (unit, animation)
		self:Animation(unit, animation)
	end)
end

function _Nami:AddMenu()
		self.Menu.KeySettings:addParam("AutoHealON", "Auto Heal", SCRIPT_PARAM_ONKEYTOGGLE, true, string.byte("H"))

		self.Menu.Combo:addParam("ComboQ", "Use Aqua Prison (Q)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboW", "Use Ebb and Flow (W)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboE", "Use Tidecaller's Blessing (E)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboR", "Use Tidal Wave (R)", SCRIPT_PARAM_ONOFF, true)
		
		self.Menu.MiscSettings:addSubMenu("Auto Heal", "AutoHeal")
			self.Menu.MiscSettings.AutoHeal:addParam("AutoHealHealth", "AutoHeal if health < (%)", SCRIPT_PARAM_SLICE, 50, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("AutoHealMana", "AutoHeal if mana > (%)", SCRIPT_PARAM_SLICE, 20, 0, 100, 0)
			
		self.Menu.DrawSettings:addParam("DrawQ", "Draw Q range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawQColor", "Q color", SCRIPT_PARAM_COLOR, {255, 0, 255, 255})
		self.Menu.DrawSettings:addParam("DrawW", "Draw W range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawWColor", "W color", SCRIPT_PARAM_COLOR, {255, 0, 175, 255})
		self.Menu.DrawSettings:addParam("DrawE", "Draw E range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawEColor", "E color", SCRIPT_PARAM_COLOR, {255, 0, 100, 255})
		self.Menu.DrawSettings:addParam("DrawR", "Draw R range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawRColor", "R color", SCRIPT_PARAM_COLOR, {255, 0, 0, 255})
end

function _Nami:SetupUPL()
	UPL:AddToMenu(self.Menu)
	UPL:AddSpell(_Q, {speed = math.huge, delay = 0.95, range = 1625, width = 150, collision = false, aoe = true, type="circular"})
	UPL:AddSpell(_R, {speed = 859, delay = 0.5, range = 2750, width = 562, collision = false, aoe = true, type="linear"})
end

function _Nami:tick()
	if self.Menu.KeySettings.ComboON then
		self:Combo()
	end
	
	if self.Menu.KeySettings.AutoHealON and not self.Menu.KeySettings.ComboON and not IsRecalling then
		self:AutoHeal()
	end
end

function _Nami:draw()
	if self.Menu.DrawSettings.DrawQ then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 800, 1, ARGB(self.Menu.DrawSettings.DrawQColor[1], self.Menu.DrawSettings.DrawQColor[2], self.Menu.DrawSettings.DrawQColor[3], self.Menu.DrawSettings.DrawQColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawW then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 550, 1, ARGB(self.Menu.DrawSettings.DrawWColor[1], self.Menu.DrawSettings.DrawWColor[2], self.Menu.DrawSettings.DrawWColor[3], self.Menu.DrawSettings.DrawWColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawE then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 900, 1, ARGB(self.Menu.DrawSettings.DrawEColor[1], self.Menu.DrawSettings.DrawEColor[2], self.Menu.DrawSettings.DrawEColor[3], self.Menu.DrawSettings.DrawEColor[4]), 50)
	end
	
end

function _Nami:Animation(unit, animation)
    if unit.isMe then
		if animation == "recall" then
			IsRecalling = true
		else
			IsRecalling = false
		end
	end
end

function _Nami:Combo()
	if self.Menu.Combo.ComboE and myHero:CanUseSpell(_E) == READY then
		for i, hero in pairs(GetAllyHeroes()) do
			if hero and not hero.dead and GetDistance(myHero, hero) < 800 and GetDistance(hero, target) < hero.range + hero.boundingRadius and TargetCheck(target) then
				CastSpell(_E, hero)
			end
		end
		
		if GetDistance(myHero, target) < myHero.range + myHero.boundingRadius and TargetCheck(target) then
			CastSpell(_E, myHero)
		end
	end
	
	if self.Menu.Combo.ComboQ and myHero:CanUseSpell(_Q) == READY and TargetCheck(target) then
		CastPosition, HitChance, HeroPosition = UPL:Predict(_Q, myHero, target)
		if CastPosition and HitChance > 0 then
			CastSpell(_Q, CastPosition.x, CastPosition.z)
		end
	end
	
	if self.Menu.Combo.ComboW and myHero:CanUseSpell(_W) == READY and TargetCheck(target) then
		CastSpell(_W, target)
	end
	
	if self.Menu.Combo.ComboR and myHero:CanUseSpell(_R) == READY and TargetCheck(target) then
		CastPosition, HitChance, HeroPosition = UPL:Predict(_R, myHero, target)
		if CastPosition and HitChance > 0 then
			CastSpell(_R, CastPosition.x, CastPosition.z)
		end
	end
end

function _Nami:AutoHeal()
	if (myHero.health / myHero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.AutoHealHealth and ( ( myHero.health / myHero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.AutoHealMana ) then
		CastSpell(_W, myHero)
	else
		for i, hero in pairs(GetAllyHeroes()) do
			if hero and not hero.dead and GetDistance(myHero, hero) < 725 and (hero.health / hero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.AutoHealHealth and ( ( hero.health / hero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.AutoHealMana ) then
				CastSpell(_W, hero)
			end
		end
	end
end





--[[
		 _____   _____   __   _       ___  
		/  ___/ /  _  \ |  \ | |     /   | 
		| |___  | | | | |   \| |    / /| | 
		\___  \ | | | | | |\   |   / / | | 
		 ___| | | |_| | | | \  |  / /  | | 
		/_____/ \_____/ |_|  \_| /_/   |_| 

]]--


Class("_Sona")
function _Sona:__init(Menu)
	self.Menu = Menu
	self:AddMenu()
	self:SetupUPL()
	
	IsRecalling = false
	
	AddTickCallback(function ()
		self:tick()
	end)
	
	AddDrawCallback(function ()
		if not myHero.dead then
			self:draw()
		end
	end)
	
	AddAnimationCallback(function (unit, animation)
		self:Animation(unit, animation)
	end)
end

function _Sona:AddMenu()
		self.Menu.KeySettings:addParam("AutoHealON", "Auto Heal", SCRIPT_PARAM_ONKEYTOGGLE, true, string.byte("H"))

		self.Menu.Combo:addParam("ComboQ", "Use Hymn of Valor (Q)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboE", "Use Song of Celerity (E)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboR", "Use Crescendo (R)", SCRIPT_PARAM_ONOFF, true)
		
		self.Menu.MiscSettings:addSubMenu("Auto Heal", "AutoHeal")
			self.Menu.MiscSettings.AutoHeal:addParam("AutoHealHealth", "AutoHeal if health < (%)", SCRIPT_PARAM_SLICE, 50, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("AutoHealMana", "AutoHeal if mana > (%)", SCRIPT_PARAM_SLICE, 20, 0, 100, 0)
		
		self.Menu.DrawSettings:addParam("DrawQ", "Draw Q range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawQColor", "Q color", SCRIPT_PARAM_COLOR, {255, 0, 187, 255})
		self.Menu.DrawSettings:addParam("DrawW", "Draw W range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawWColor", "W color", SCRIPT_PARAM_COLOR, {255, 0, 255, 97})
		self.Menu.DrawSettings:addParam("DrawR", "Draw R range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawRColor", "R color", SCRIPT_PARAM_COLOR, {255, 255, 204, 0})
end

function _Sona:SetupUPL()
	UPL:AddToMenu(self.Menu)
	UPL:AddSpell(_R, {speed = 2400, delay = 0.25, range = 760, width = 140, collision = false, aoe = true, type="linear"})
end

function _Sona:tick()
	if self.Menu.KeySettings.ComboON then
		self:Combo()
	end
	
	if self.Menu.KeySettings.AutoHealON and myHero:CanUseSpell(_W) == READY and not IsRecalling then
		self:AutoHeal()
	end
end

function _Sona:draw()
	if self.Menu.DrawSettings.DrawQ then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 850, 1, ARGB(self.Menu.DrawSettings.DrawQColor[1], self.Menu.DrawSettings.DrawQColor[2], self.Menu.DrawSettings.DrawQColor[3], self.Menu.DrawSettings.DrawQColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawW then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 1000, 1, ARGB(self.Menu.DrawSettings.DrawWColor[1], self.Menu.DrawSettings.DrawWColor[2], self.Menu.DrawSettings.DrawWColor[3], self.Menu.DrawSettings.DrawWColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawR then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 900, 1, ARGB(self.Menu.DrawSettings.DrawRColor[1], self.Menu.DrawSettings.DrawRColor[2], self.Menu.DrawSettings.DrawRColor[3], self.Menu.DrawSettings.DrawRColor[4]), 50)
	end
	
end

function _Sona:Animation(unit, animation)
    if unit.isMe then
		if animation == "recall" then
			IsRecalling = true
		else
			IsRecalling = false
		end
	end
end

function _Sona:Combo()
	if self.Menu.Combo.ComboE and myHero:CanUseSpell(_E) == READY and TargetCheck(target) then
		CastSpell(_E)
	end
	
	if self.Menu.Combo.ComboR and myHero:CanUseSpell(_R) == READY and TargetCheck(target) then
		CastPosition, HitChance, HeroPosition = UPL:Predict(_R, myHero, target)
		if CastPosition and HitChance > 0 then
			CastSpell(_R, CastPosition.x, CastPosition.z)
		end
	end
	
	if self.Menu.Combo.ComboQ and myHero:CanUseSpell(_Q) == READY and TargetCheck(target) and (GetDistance(myHero, target) < 850) then
		CastSpell(_Q)
	end
end

function _Sona:AutoHeal()
	if (myHero.health / myHero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.AutoHealHealth and ( ( myHero.health / myHero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.AutoHealMana ) then
		CastSpell(_W)
	else
		for i, hero in pairs(GetAllyHeroes()) do
			if hero and not hero.dead and GetDistance(myHero, hero) < 1000 and (hero.health / hero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.AutoHealHealth and ( ( hero.health / hero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.AutoHealMana ) then
				CastSpell(_W)
			end
		end
	end
end





--[[
		 _____   _____   _____        ___   _   _        ___  
		/  ___/ /  _  \ |  _  \      /   | | | / /      /   | 
		| |___  | | | | | |_| |     / /| | | |/ /      / /| | 
		\___  \ | | | | |  _  /    / / | | | |\ \     / / | | 
		 ___| | | |_| | | | \ \   / /  | | | | \ \   / /  | | 
		/_____/ \_____/ |_|  \_\ /_/   |_| |_|  \_\ /_/   |_| 

]]--


Class("_Soraka")
function _Soraka:__init(Menu)
	self.Menu = Menu
	self:AddMenu()
	self:SetupUPL()
	
	IsRecalling = false
	
	AddTickCallback(function ()
		self:tick()
	end)
	
	AddDrawCallback(function ()
		if not myHero.dead then
			self:draw()
		end
	end)
	
	AddAnimationCallback(function (unit, animation)
		self:Animation(unit, animation)
	end)
end

function _Soraka:AddMenu()
		self.Menu.KeySettings:addParam("AutoHealON", "Auto Heal", SCRIPT_PARAM_ONKEYTOGGLE, true, string.byte("H"))

		self.Menu.Combo:addParam("ComboQ", "Use Starcall (Q)", SCRIPT_PARAM_ONOFF, true)
		self.Menu.Combo:addParam("ComboE", "Use Equinox (E)", SCRIPT_PARAM_ONOFF, true)
		
		self.Menu.MiscSettings:addSubMenu("Auto Heal", "AutoHeal")
			self.Menu.MiscSettings.AutoHeal:addParam("WAutoHeal", "> AutoHeal with W",SCRIPT_PARAM_INFO, "")
			self.Menu.MiscSettings.AutoHeal:addParam("WAutoHealHealth", "AutoHeal if health < (%)", SCRIPT_PARAM_SLICE, 50, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("WAutoHealMana", "AutoHeal if mana > (%)", SCRIPT_PARAM_SLICE, 20, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("WAutoHealLife", "AutoHeal if my health > (%)", SCRIPT_PARAM_SLICE, 20, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("AutoHealSpace", "",SCRIPT_PARAM_INFO, "")
			self.Menu.MiscSettings.AutoHeal:addParam("RAutoHeal", "> AutoHeal with R",SCRIPT_PARAM_INFO, "")
			self.Menu.MiscSettings.AutoHeal:addParam("RAutoHealHealth", "AutoHeal if health < (%)", SCRIPT_PARAM_SLICE, 10, 0, 100, 0)
			self.Menu.MiscSettings.AutoHeal:addParam("RAutoHealMana", "AutoHeal if mana > (%)", SCRIPT_PARAM_SLICE, 20, 0, 100, 0)
			
		self.Menu.DrawSettings:addParam("DrawQ", "Draw Q range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawQColor", "Q color", SCRIPT_PARAM_COLOR, {255, 255, 150, 0})
		self.Menu.DrawSettings:addParam("DrawW", "Draw W range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawWColor", "W color", SCRIPT_PARAM_COLOR, {255, 255, 204, 0})
		self.Menu.DrawSettings:addParam("DrawE", "Draw E range", SCRIPT_PARAM_ONOFF, true)
		self.Menu.DrawSettings:addParam("DrawEColor", "E color", SCRIPT_PARAM_COLOR, {255, 160, 0, 255})
end

function _Soraka:SetupUPL()
	UPL:AddToMenu(self.Menu)
	UPL:AddSpell(_Q, {speed = 1750, delay = 0.5, range = 800, width = 300, collision = false, aoe = true, type="circular"})
	UPL:AddSpell(_E, {speed = math.huge, delay = 0.5, range = 925, width = 250, collision = false, aoe = true, type="circular"})
end

function _Soraka:tick()
	if self.Menu.KeySettings.ComboON then
		self:Combo()
	end
	
	if self.Menu.KeySettings.AutoHealON and not IsRecalling then
		self:AutoHeal()
	end
end

function _Soraka:draw()
	if self.Menu.DrawSettings.DrawQ then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 800, 1, ARGB(self.Menu.DrawSettings.DrawQColor[1], self.Menu.DrawSettings.DrawQColor[2], self.Menu.DrawSettings.DrawQColor[3], self.Menu.DrawSettings.DrawQColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawW then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 550, 1, ARGB(self.Menu.DrawSettings.DrawWColor[1], self.Menu.DrawSettings.DrawWColor[2], self.Menu.DrawSettings.DrawWColor[3], self.Menu.DrawSettings.DrawWColor[4]), 50)
	end
	
	if self.Menu.DrawSettings.DrawE then
		DrawCircle3D(myHero.x, myHero.y, myHero.z, 900, 1, ARGB(self.Menu.DrawSettings.DrawEColor[1], self.Menu.DrawSettings.DrawEColor[2], self.Menu.DrawSettings.DrawEColor[3], self.Menu.DrawSettings.DrawEColor[4]), 50)
	end
	
end

function _Soraka:Animation(unit, animation)
    if unit.isMe then
		if animation == "recall" then
			IsRecalling = true
		else
			IsRecalling = false
		end
	end
end

function _Soraka:Combo()
	if self.Menu.Combo.ComboQ and myHero:CanUseSpell(_Q) == READY and TargetCheck(target) then
		CastPosition, HitChance, HeroPosition = UPL:Predict(_Q, myHero, target)
		if CastPosition and HitChance > 0 then
			CastSpell(_Q, CastPosition.x, CastPosition.z)
		end
	end
	
	if self.Menu.Combo.ComboE and myHero:CanUseSpell(_E) == READY and TargetCheck(target) then
		CastPosition, HitChance, HeroPosition = UPL:Predict(_E, myHero, target)
		if CastPosition and HitChance > 0 then
			CastSpell(_E, CastPosition.x, CastPosition.z)
		end
	end
end

function _Soraka:AutoHeal()
	for i, hero in pairs(GetAllyHeroes()) do
		if hero and not hero.dead and GetDistance(myHero, hero) < 550 and myHero:CanUseSpell(_W) == READY and self.Menu.MiscSettings.AutoHeal.WAutoHealLife < (myHero.health / myHero.maxHealth * 100) and (hero.health / hero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.WAutoHealHealth and ( ( hero.health / hero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.WAutoHealMana ) then
			CastSpell(_W, hero)
		end
		
		if hero and not hero.dead and myHero:CanUseSpell(_R) == READY and ( (hero.health / hero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.RAutoHealHealth or (myHero.health / myHero.maxHealth * 100) < self.Menu.MiscSettings.AutoHeal.RAutoHealHealth ) and ( ( hero.health / hero.maxHealth * 100) < 10 or (myHero.mana / myHero.maxMana * 100) > self.Menu.MiscSettings.AutoHeal.RAutoHealMana ) then
			CastSpell(_R)
		end
	end
end





--[[
		 _____   ___       ___  ___   _____   _       _____        _____   _____   _          __  __   _   _       _____       ___   _____   _____   _____   
		/  ___/ |_  |     /   |/   | |  _  \ | |     | ____|      |  _  \ /  _  \ | |        / / |  \ | | | |     /  _  \     /   | |  _  \ | ____| |  _  \  
		| |___    | |    / /|   /| | | |_| | | |     | |__        | | | | | | | | | |  __   / /  |   \| | | |     | | | |    / /| | | | | | | |__   | |_| |  
		\___  \   | |   / / |__/ | | |  ___/ | |     |  __|       | | | | | | | | | | /  | / /   | |\   | | |     | | | |   / / | | | | | | |  __|  |  _  /  
		 ___| |   | |  / /       | | | |     | |___  | |___       | |_| | | |_| | | |/   |/ /    | | \  | | |___  | |_| |  / /  | | | |_| | | |___  | | \ \  
		/_____/   |_| /_/        |_| |_|     |_____| |_____|      |_____/ \_____/ |___/|___/     |_|  \_| |_____| \_____/ /_/   |_| |_____/ |_____| |_|  \_\ 

]]--


function TCPGetRequest(server, path, data, port)
	local start_t = os.clock()
	local port = port or 80
	local data = data or {}
	local lua_socket = require("socket")
	local connection_tcp = lua_socket.connect(server,port)
	local requeststring = "GET "..path
	local first = true
	for i,v in pairs(data)do
		requeststring = requeststring..(first and "?" or "&")..i.."="..v
		first = false
	end
	requeststring = requeststring.. " HTTP/1.0\r\nHost: "..server.."\r\n\r\n"
	connection_tcp:send(requeststring)
	local response = ""
	local status
	while true do
		s,status, partial = connection_tcp:receive('*a')
		response = response..(s or partial)
		if(status == "closed" or status == "timeout")then
			break
		end
	end
	local end_t = os.clock()
	local start_content = response:find("\r\n\r\n")+4
	response = response:sub(start_content)
	return response, status, end_t-start_t
end

function GetWebFile(server, path, data, localfilename, port, b64)
	local r,s,t = TCPGetRequest(server, path, data, port)
	file = io.open(localfilename,"w+b")
	file:write(r)
	file:close()
end